{"id":"f6a37625-9bac-46cc-859d-aa0783f42aa8","zed":"context","version":"0.4.0","text":"\n\n\nHow to get data passed via htmx with hx-vals in golang\n\nTo get data passed via `hx-vals` in Go using the Gin web framework (which is a popular choice for building APIs), you need to decode the incoming request body and extract the data. The `hx-vals` attribute allows you to pass arbitrary JSON data along with your HTTP requests.\n\nHere's a step-by-step guide on how to achieve this:\n\n1. **Set up your Go environment**: Make sure you have Go installed and set up on your system.\n\n2. **Create a new Gin project**:\n   ```sh\n   go mod init myproject\n   ```\n\n3. **Install Gin**:\n   ```sh\n   go get -u github.com/gin-gonic/gin\n   ```\n\n4. **Create a handler function to decode the `hx-vals` data**:\n\n   Here's an example of how you can set up a simple API endpoint that receives JSON data via `hx-vals`.\n\n   ```go\n   package main\n\n   import (\n       \"encoding/json\"\n       \"net/http\"\n\n       \"github.com/gin-gonic/gin\"\n   )\n\n   type MyData struct {\n       Name string `json:\"name\"`\n       Age  int    `json:\"age\"`\n   }\n\n   func main() {\n       r := gin.Default()\n\n       // Define a POST endpoint that accepts JSON data\n       r.POST(\"/submit\", func(c *gin.Context) {\n           var data MyData\n\n           // Bind the request body to the struct\n           if err := c.ShouldBindJSON(&data); err != nil {\n               c.JSON(http.StatusBadRequest, gin.H{\"error\": err.Error()})\n               return\n           }\n\n           // Process the received data\n           c.JSON(http.StatusOK, gin.H{\n               \"message\": \"Data received successfully\",\n               \"data\":    data,\n           })\n       })\n\n       r.Run(\":8080\")\n   }\n   ```\n\n5. **HTML Form with `hx-vals`**:\n\n   You can use a form to submit data via `hx-vals`. Here's an example using the Hyperapp library, which allows you to easily attach `hx-*` attributes.\n\n   ```html\n   <!DOCTYPE html>\n   <html lang=\"en\">\n   <head>\n       <meta charset=\"UTF-8\">\n       <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n       <title>Submit Data</title>\n       <script src=\"https://cdn.jsdelivr.net/npm/hyperapp@3\"></script>\n   </head>\n   <body>\n       <div id=\"app\">\n           <form hx-post=\"/submit\" hx-vals='{\"name\": \"John Doe\", \"age\": 30}' hx-target=\"#response\">\n               <input type=\"text\" name=\"name\" placeholder=\"Name\">\n               <input type=\"number\" name=\"age\" placeholder=\"Age\">\n               <button type=\"submit\">Submit</button>\n           </form>\n           <div id=\"response\"></div>\n       </div>\n\n       <script type=\"module\">\n           import { h, render } from 'https://cdn.jsdelivr.net/npm/hyperapp@3'\n\n           const main = () => {\n               return h('div', {}, [\n                   h('form', { hxPost: '/submit', hxVals: '{\"name\": \"John Doe\", \"age\": 30}', hxTarget: '#response' }, [\n                       h('input', { type: 'text', name: 'name', placeholder: 'Name' }),\n                       h('input', { type: 'number', name: 'age', placeholder: 'Age' }),\n                       h('button', {}, 'Submit')\n                   ]),\n                   h('div', { id: 'response' })\n               ])\n           }\n\n           render(document.body, main)\n       </script>\n   </body>\n   </html>\n   ```\n\nIn this example:\n\n- The HTML form uses `hx-post` to send a POST request to the `/submit` endpoint.\n- The `hx-vals` attribute contains JSON data that will be sent with the request.\n- The Gin handler function `ShouldBindJSON(&data)` is used to decode the JSON data into a struct.\n\nWhen you submit the form, the `hx-post` attribute causes Hyperapp to send an HTTP POST request to `/submit`, including the JSON data specified in `hx-vals`. The Gin server then decodes this data and processes it accordingly.\n","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":38}}},{"id":{"replica_id":0,"value":32},"start":59,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":39}}},{"id":{"replica_id":0,"value":33},"start":3715,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":40}}}],"summary":"How to Retrieve Data Passed via hx-vals in GoLang","slash_command_output_sections":[{"range":{"start":0,"end":1},"icon":"Library","label":"Default","metadata":null}],"thought_process_output_sections":[]}